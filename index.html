<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="jquery.scroll-reveal.js"></script>

    <!-- <script src="//code.jquery.com/jquery.min.js"> </script> -->



    <title>Justus Voigt</title>
</head>

<body>


    <!-- Title Picture -->
    <div class="parallax" id="parallax-1" data-image-src="woodstock-outlook-justus.jpg" data-height="750px">
        <div class="caption">
            <span class="justus-voigt">Justus Voigt</span>
            <span class="junior-web-developer">Junior Web-developer</span>
        </div>
    </div>


    <!-- Main Section With Navbar and dynamic content -->
    <main>

        <script src="bodyScrollLock.js"></script>

        <!-- Navigation Bar -->
        <script>
            var scrollMoving = 0;

            function switchChannel(el) {
                // find all the elements in your channel list and loop over them
                Array.prototype.slice.call(document.querySelectorAll('ol[data-tag="channelList"] li')).forEach(
                    function (element) {

                        element.classList.remove('selected');
                    });

                //add the class selected on click of menu bar 
                el.classList.add('selected');

                //retrieve the value of section selected and set it equal to the scrollMoving variable 
                scrollMoving = el.value;

                //initiate function getWhatever everytime a click event has fired
                getWhatever(status);
                // console.log(scrollMoving);

                // console.log(scrollMoving);

                //this local comparison runs only when the user uses the menu bar for navigation instead of the scrolling
                if (scrollMoving >= 1 &&
                    scrollMoving <= 10) {
                    status = "introSection";

                } else if (scrollMoving >= 11 &&
                    scrollMoving <=
                    16) {
                    status = "skillsSection";

                } else if (scrollMoving >= 17 &&
                    scrollMoving <=
                    22) {
                    status = "experienceSection";
                } else if (scrollMoving >= 23 &&
                    scrollMoving <=
                    28) {
                    status = "educationSection";
                } else if (scrollMoving >= 29 &&
                    scrollMoving <=
                    34) {
                    status = "portfolioSection";

                }


                //everytime a value changes here the function gets called. Because otherwise it would only change on the next scroll 
                getWhatever(status);
            }
        </script>


        <div class=navbar-container>
            <nav class="navbar" id="navbar2">
                <ol id="list_total" data-tag="channelList">
                    <li class="li_navbar" id="introButton" onclick="switchChannel(this)" value="10"><a
                            class="words">Intro</a></li>
                    <li class="li_navbar" id="skillsButton" onclick="switchChannel(this)" value="15"><a
                            class="words">Skills</a>
                    </li>
                    <li class="li_navbar" id="experienceButton" onclick="switchChannel(this)" value="20"><a
                            class="words">Experience</a></li>
                    <li class="li_navbar" id="educationButton" onclick="switchChannel(this)" value="25"><a
                            class="words">Education</a></li>
                    <li class="li_navbar" id="portfolioButton" onclick="switchChannel(this)" value="30"><a
                            class="words">Portfolio</a></li>
                </ol>
            </nav>
        </div>
        <section>
            <article>
            </article>
        </section>
    </main>


    <script type="text/javascript" src="jquery.mousewheel.js"></script>

    <script>
        let delta = 0;
        var status;

        $(document).ready(function () {
            $("body").mousewheel(function (event, delta) {
                // console.log(event.deltaX, event.deltaY, event.deltaFactor);
                if (delta > 0) {
                    scrollMoving--;
                } else {
                    scrollMoving++;
                };
                if (scrollMoving <= -1) {
                    scrollMoving = 1
                } else if (scrollMoving >= 40) {
                    scrollMoving = 39;
                }
                if (scrollMoving >= 1 &&
                    scrollMoving <= 10) {
                    status = "introSection";

                } else if (scrollMoving >= 11 &&
                    scrollMoving <=
                    16) {
                    status = "skillsSection";

                } else if (scrollMoving >= 17 &&
                    scrollMoving <=
                    22) {
                    status = "experienceSection";
                } else if (scrollMoving >= 23 &&
                    scrollMoving <=
                    28) {
                    status = "educationSection";
                } else if (scrollMoving >= 29 &&
                    scrollMoving <=
                    34) {
                    status = "portfolioSection";
                }
                getWhatever(status);


                console.log(bodyScrollLock)
                // 1. Import the functions
                // const bodyScrollLock = require('body-scroll-lock');
                // 1. Get a target element that you want to persist scrolling for (such as a
                //  modal/lightbox/flyout/nav).
                const targetElement = document.querySelector("body");
                if (scrollMoving >= 3) {
                    console.log('higher than 3');
                    console.log(bodyScrollLock.disableBodyScroll(targetElement));

                    // 3. ...in some event handler after hiding the target element...
                } else { // 2. ...in some event handler after showing the target element...disable body scroll
                    // bodyScrollLock.enableBodyScroll(targetElement);
                    bodyScrollLock.clearAllBodyScrollLocks();


                }

                // 4. Useful if we have called disableBodyScroll for multiple target elements,
                // and we just want a kill-switch to undo all that.
                // bodyScrollLock.clearAllBodyScrollLocks();
            });






            // Parallax Effect of Title Picture

            // Populate images from data attributes.
            var scrolled = $(window).scrollTop()
            $('.parallax').each(function (index) {
                var imageSrc = $(this).data('image-src')
                var imageHeight = $(this).data('height')
                $(this).css('background-image', 'url(' + imageSrc + ')')
                $(this).css('height', imageHeight)

                // Adjust the background position.
                var initY = $(this).offset().top
                var height = $(this).height()
                var diff = scrolled - initY
                var ratio = Math.round((diff / height) * 100)
                $(this).css('background-position', 'center ' + parseInt(-(ratio *
                        1.5)) +
                    'px')
            })

            // Attach scroll event to window. Calculate the scroll ratio of each element
            // and change the image position with that ratio.
            // https://codepen.io/lemagus/pen/RWxEYz
            $(window).scroll(function () {
                var scrolled = $(window).scrollTop()
                $('.parallax').each(function (index, element) {
                    var initY = $(this).offset().top
                    var height = $(this).height()
                    var endY = initY + $(this).height()

                    // Check if the element is in the viewport.
                    var visible = isInViewport(this)
                    if (visible) {
                        var diff = scrolled - initY
                        var ratio = Math.round((diff / height) * 100)
                        $(this).css('background-position', 'center ' + parseInt(
                            -(
                                ratio *
                                1.5)) + 'px');
                        scrollMoving = 0;

                    } else {
                        // imageout();
                        console.log(
                            "stops formal scroll and continues custom scroll"
                        );
                    }
                })



                // console.log(defaultStop);
                // Check if the element is in the viewport.
                // http://www.hnldesign.nl/work/code/check-if-element-is-visible/
                function isInViewport(node) {
                    // Am I visible? Height and Width are not explicitly necessary in visibility
                    // detection, the bottom, right, top and left are the essential checks. If an
                    // image is 0x0, it is technically not visible, so it should not be marked as
                    // such. That is why either width or height have to be > 0.
                    var rect = node.getBoundingClientRect()
                    return (
                        (rect.height > 0 || rect.width > 0) &&
                        rect.bottom >= 0 &&
                        rect.right >= 0 &&
                        rect.top <= (window.innerHeight || document.documentElement
                            .clientHeight) &&
                        rect.left <= (window.innerWidth || document.documentElement.clientWidth)
                    )
                }
            })
        })








        ////////////////function that populates the html ///////////////////////
        function getWhatever(status) {
            console.log(scrollMoving);
            console.log(status);
            switch (status) {
                case "introSection":
                    $('#introButton').addClass('selected')
                    $('#skillsButton').removeClass('selected')
                    $('article').empty();
                    $('article').addClass('intro');
                    $('article').append(
                        '<h3>Intro</h3>\
                        <div class="span2">\
                            <div class= "face_total" >\
                            <img class="face"\
                                src="Justus-Sylvester.png"\
                                alt="Banner Image" />\
                            </div>\
                            <div class="body_total">\
                                <div class="body1">\
                                </div>\
                            </div>\
                            <div class="legs_total">\
                                <div class="leg_left"></div>\
                                <div class="leg_right"></div>\
                            </div>\
                            <div class="feet_total">\
                                <div class="foot_left"></div>\
                                <div class="foot_right"></div>\
                            </div>\
                        </div>\
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin fermentum lacinia faucibus. Curabitur vestibulum nibh at erat eleifend dignissim.Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpisegestas.Etiam euismod blandit erat ac tincidunt.Pellentesque mattis quis erat non fermentum.Aenean diam mi, auctor in mi non, molestie condimentum mi.Interdum et malesuada fames ac ante ipsum primis in faucibus.Interdum et malesuada.</p>'
                    );
                    break;

                case "skillsSection":
                    $('#skillsButton').addClass('selected')
                    $('#introButton').removeClass('selected')
                    $('article').empty();
                    $('article').addClass('skills');
                    $('article').append('<a id="skills">\
                        <h3>Skills</h3>\
                        <div class="flip_boxes">\
                            <div class="flip_html">\
                                <div class="flip_inner_html">\
                                    <div class="flip_front_html">\
                                        <img class="img_html" src="html_logo_new.png" alt="html_logo">\
                                    </div>\
                                    <div class="flip_back_html">\
                                        <p>Lorem ipsum </p>\
                                    </div>\
                                </div>\
                            </div>\
                            <div class="flip_css">\
                                <div class="flip_inner_css">\
                                    <div class="flip_front_css">\
                                        <img class="img_css" src="css_logo_new.png" alt="css_logo">\
                                    </div>\
                                    <div class="flip_back_css">\
                                        <p>Lorem ipsum dolor</p>\
                                    </div>\
                                </div>\
                            </div>\
                            <div class="flip_js">\
                                <div class="flip_inner_js">\
                                    <div class="flip_front_js">\
                                        <img class="img_js" src="js_logo_new.png" alt="js_logo">\
                                    </div>\
                                    <div class="flip_back_js">\
                                        <p>Lorem ipsum </p>\
                                    </div>\
                                </div>\
                            </div>\
                            </div>\
                            </a>')
            };
        };



        // console.log(defaultStop);
    </script>





</body>

</html>